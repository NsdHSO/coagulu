<input
  [formControl]="mainControl"
  placeholder=" "
  class="input-dropdown peer text !pt-[0.7rem]"
  [ngClass]="{
    '!pr-[9.5rem]': currencyControl,
    'text-red-500 !border-red-500': mainControl?.errors
  }"
  #inputSivan
/>
<div
  *ngIf="currencyControl"
  class="absolute w-[0.5px] bg-gray-300 right-[5.5rem] h-full top-0"
></div>
<div
  class="absolute w-fit !h-full top-0 min-w-[6rem] right-0"
  *ngIf="currencyControl"
>
  <div
    class="relative !h-full flex justify-center items-center"
    (click)="currencyControll()"
  >
    <mat-icon
      class="right-4 absolute"
      [ngClass]="colorMatIcon"
      [svgIcon]="'fa_solid:angle-up'"
      [@rotateIcon]="isInputCurrencyClick ? 'up' : 'down'"
    ></mat-icon>
    <mat-icon
      class="right-[3rem] absolute"
      [ngClass]="colorMatIcon"
      [svgIcon]="currencyControl.controls.icon.value"
    ></mat-icon>
    <span
      class="absolute right-24 font-bold font-serif text-gray-400 dark:text-white"
      >{{ currencyControl.controls.placeholder.value }}</span
    >
  </div>
  <div *ngIf="isInputCurrencyClick">
    <ng-container *ngTemplateOutlet="optionsTemplate"></ng-container>
  </div>
</div>
<mat-icon
  [ngClass]="colorMatIcon"
  (click)="showOption(inputSivan)"
  *ngIf="optionis && optionis.length > 0 && !currencyControl"
  class="absolute right-4 top-3"
  [svgIcon]="'fa_solid:angle-up'"
  [@rotateIcon]="isInputClick ? 'up' : 'down'"
></mat-icon>
<div [@fadeInOut] *ngIf="optionis && optionis.length > 0 && isInputClick">
  <!-- Content to display when options.length > 0 -->
  <ng-container *ngTemplateOutlet="optionsTemplate"></ng-container>
</div>
<!-- Template for when options.length > 0 -->
<ng-template #optionsTemplate>
  <ftx-tooltip
    [rendererTemplate]="
      currencyControl ? optionCurrencyTemplate : optionTemplate
    "
  />
</ng-template>

<!-- Template for when options.length is <= 0 -->
<ng-template #optionTemplate>
  <div class="overflow-auto">
    <p>Options are available:</p>
    <ul>
      <li
        (click)="onBlur(option)"
        *ngFor="let option of optionis; trackBy: generative.trackBy"
      >
        {{ option }}
      </li>
    </ul>
  </div>
</ng-template>

<!-- Template for when options.length is <= 0 -->
<ng-template #optionCurrencyTemplate>
  <div class="overflow-auto">
    <div
      class="currency-flag"
      *ngFor="let option of optionis; trackBy: generative.trackBy"
      (click)="selectCountry(option)"
    >
      <mat-icon class="!w-full rounded-2xl" [svgIcon]="option.icon" />
    </div>
  </div>
</ng-template>
<div *ngIf="mainControl?.errors" class="text-red-500 absolute text-sm">
  {{ mainControl.errors?.['error']  }}
</div>
