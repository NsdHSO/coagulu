<div
  class="sivan-input-container"
  [ngClass]="{
    'text-red-500 !border-red-500': mainControl?.errors
  }"
>
  <div class="peer-container rounded-tl-none relative">
    <input
      [formControl]="mainControl"
      placeholder=" "
      class="input-dropdown peer text"
    />
    <div [@fadeInOut] *ngIf="optionis && optionis.length > 0 && isInputClick">
      <!-- Content to display when options.length > 0 -->
      <ng-container *ngTemplateOutlet="optionsTemplate"></ng-container>
    </div>
  </div>
  <div
    *ngIf="optionis.length >= 1 && currencyControl"
    class="border-l border-l-white border-solid flex justify-center items-center relative"
  >
    <span class="font-bold font-serif text-gray-400 dark:text-white pl-5">{{
      currencyControl.controls.placeholder.value
    }}</span>

    <div
      class="!h-full flex justify-center items-center px-5 gap-4"
      (click)="currencyControll()"
    >
      <mat-icon
        class="right-4"
        [ngClass]="colorMatIcon"
        [svgIcon]="'fa_solid:angle-up'"
        [@rotateIcon]="isInputCurrencyClick ? 'up' : 'down'"
      ></mat-icon>
      <mat-icon
        class="right-[3rem]"
        [ngClass]="colorMatIcon"
        [svgIcon]="currencyControl.controls.icon.value"
      ></mat-icon>
    </div>
    <div class="absolute w-full top-12" *ngIf="isInputCurrencyClick">
      <ng-container *ngTemplateOutlet="optionsTemplate"></ng-container>
    </div>
  </div>
</div>

<!-- Template for when options.length > 0 -->
<ng-template #optionsTemplate>
  <ftx-tooltip
    [rendererTemplate]="
      currencyControl ? optionCurrencyTemplate : optionTemplate
    "
  />
</ng-template>

<!-- Template for when options.length is <= 0 -->
<ng-template #optionTemplate>
  <div class="overflow-auto dark:text-white">
    <p>Options are available:</p>
    <ul>
      <li
        (click)="onBlur(option)"
        *ngFor="let option of optionis; trackBy: generative.trackBy"
      >
        {{ option }}
      </li>
    </ul>
  </div>
</ng-template>

<!-- Template for when options.length is <= 0 -->
<ng-template #optionCurrencyTemplate>
  <div class="overflow-auto">
    <div
      class="currency-flag"
      *ngFor="let option of optionis; trackBy: generative.trackBy"
      (click)="selectCountry(option)"
    >
      <mat-icon class="!w-full rounded-2xl" [svgIcon]="option.icon" />
    </div>
  </div>
</ng-template>
<div *ngIf="mainControl?.errors" class="text-red-500 absolute text-sm">
  {{ mainControl.errors?.['error']  }}
</div>
