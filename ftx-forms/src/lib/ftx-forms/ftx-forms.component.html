<form
  (ngSubmit)="submitEvent.emit(true)"
  [formGroup]="dynamicForm"
  class="p-3 flex flex-col"
>
  <!-- Use formGroup to create form fields dynamically -->
  <ng-container
    *ngFor="
      let control of dynamicForm.controls | keyvalue;
      trackBy: generateFormBuilderService.trackBy
    "
  >
    <ng-container *ngIf="isFormControl(control.value)">
      <ngx-form-control-label
        [formControlName]="control.key"
        [label]="control.key"
        class="col-span-4"
      />
    </ng-container>
    <ng-container *ngIf="isFormGroup(control.value)">
      <ng-container [formGroupName]="control.key">
        <ng-container
          *ngFor="
            let group of control.value.controls | keyvalue;
            trackBy: generateFormBuilderService.trackBy
          "
        >
          <ngx-form-control-label
            [formControlName]="group.key"
            [label]="group.key"
            class="col-span-4"
          />
        </ng-container>
      </ng-container>
    </ng-container>
    <ng-container
      *ngIf="isFormArray(control.value)"
      [formArrayName]="control.key"
    >
      {{ control.key }}
      <ng-container
        *ngFor="
          let array of control.value.controls | keyvalue;
          trackBy: generateFormBuilderService.trackBy;
          let indexA = index
        "
        [formGroupName]="array.key"
      >
        <ng-container>
          <ng-container
            *ngFor="
              let group of formGroup(array.value).controls | keyvalue;
              trackBy: generateFormBuilderService.trackBy
            "
          >
            <ngx-form-control-label
              [formControlName]="group.key"
              class="col-span-4"
            />
          </ng-container>
        </ng-container>
      </ng-container>
    </ng-container>
  </ng-container>
  <ngx-button-component
    [disable]="dynamicForm.pristine || dynamicForm.invalid"
    roundedFull="rounded-md"
    type="submit"
    >Submit
  </ngx-button-component>
</form>
