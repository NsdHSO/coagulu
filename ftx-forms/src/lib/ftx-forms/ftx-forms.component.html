<form
  [formGroup]="dynamicForm"
  (ngSubmit)="submitEvent.emit(true)"
  class="p-3 flex flex-col"
>
  <ng-container
    *ngTemplateOutlet="
      renderControlRecursive;
      context: {
        control: dynamicForm,
        controlKey: null
      }
    "
  ></ng-container>

  <ngx-button-component
    [disable]="dynamicForm.pristine || dynamicForm.invalid"
    roundedFull="rounded-md"
    >Submit
  </ngx-button-component>
</form>

<ng-template
  #renderControlRecursive
  let-control="control"
  let-controlKey="controlKey"
>
  <ng-container [ngSwitch]="control.constructor.name">
    <!-- Render FormControl -->
    <ng-container *ngSwitchDefault>
      <ngx-form-control-label
        [formControl]="control"
        [labelInput]="controlMapping[controlKey]?.labelHint"
        [label]="controlKey"
        [placeholderInput]="controlMapping[controlKey]?.placeholder"
        [toggleData]="controlMapping[controlKey]?.valueToggleShow"
        [typeInput]="controlMapping[controlKey]?.typeInput"
      ></ngx-form-control-label>
    </ng-container>
  </ng-container>
</ng-template>
